<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Mapa de Nuvens + Zonas de Observação</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    html, body, #windy {
      height: 100%;
      margin: 0;
    }
  </style>
</head>
<body>
  <div id="windy"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://api.windy.com/assets/map-forecast/libBoot.js"></script>
  <script src="https://unpkg.com/esri-leaflet@3.0.11/dist/esri-leaflet.js"></script>

  <script>
    const options = {
      key: 'iq6kSRN7NqNuaZKP3MX5bZnS9X5grKVn',
      lat: 39.5,
      lon: -8.0,
      zoom: 7,
      overlay: 'clouds'
    };

    windyInit(options, function(windyAPI) {
      const { map } = windyAPI;

      L.esri.featureLayer({
        url: 'https://services.arcgis.com/UJ3TLmT9BhE4Cj52/arcgis/rest/services/Zonas_Observacao_Turismo/FeatureServer/0',
        pointToLayer: (geojson, latlng) => L.circleMarker(latlng, {
          radius: 6,
          fillColor: "#ff6600",
          color: "#000",
          weight: 1,
          opacity: 1,
          fillOpacity: 0.8
        }),
        onEachFeature: (feature, layer) => {
          const nome = feature.properties.Nome || "Sem nome";
          const classif = feature.properties.Classificacao || "Sem classificação";
          const desc = feature.properties.Descricao || "";
          layer.bindPopup(`<strong>${nome}</strong><br/>Classificação: ${classif}<br/>${desc}`);
        }
      }).addTo(map);
    });
  </script>
</body>
</html>

